<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ofertas - MASSA</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <style>
    .offer-card{ background: var(--soft-white); border-radius: 20px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 10px 30px rgba(139,69,19,.1); border: 1px solid rgba(212,165,116,.2); position: relative; overflow: hidden; }
    .offer-title{ font-size: 1.3rem; font-weight:700; color: var(--charcoal); margin-bottom:.5rem; }
    .offer-description{ color: var(--warm-brown); font-size:.95rem; margin-bottom:1rem; line-height:1.6; }
    .offer-price{ display:flex; align-items:center; gap:.5rem; margin-bottom:1rem; }
    .original-price{ text-decoration: line-through; color: rgba(139,69,19,.6); font-size:.9rem; }
    .offer-price-value{ font-size:1.4rem; font-weight:700; color: var(--primary-gold); }
    .offer-terms{ background: rgba(212,165,116,.1); padding:1rem; border-radius: 15px; border-left:4px solid var(--primary-gold); }
  </style>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="../../supabase-config.js"></script>
</head>
<body>
  <header class="header" style="background: linear-gradient(135deg, var(--charcoal) 0%, var(--dark-brown) 100%); color: var(--soft-white); text-align:center; padding: 2rem 1rem 1.5rem; position:relative; box-shadow: 0 4px 20px rgba(0,0,0,.3)">
    <div class="header-content">
      <div class="logo" style="width:60px;height:60px;background: var(--gradient-gold);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;box-shadow:0 8px 25px rgba(212,165,116,.4)">
        <i class="fas fa-wheat-awn" style="color: var(--charcoal); font-size: 1.8rem;"></i>
      </div>
      <h1 class="font-serif" style="color: var(--primary-gold); font-weight: 900;">Ofertas MASSA</h1>
      <p id="location-label" style="color: var(--light-gold); font-weight: 600;">Cargando local...</p>
    </div>
  </header>

  <main class="container" style="max-width: 600px; margin: 0 auto; padding: 1rem;">
    <div id="loading" class="loading" style="text-align:center;padding:3rem 1rem;">
      <div class="loading-spinner" style="width:60px;height:60px;border:4px solid var(--light-gold);border-top:4px solid var(--primary-gold);border-radius:50%;animation: spin 1s linear infinite; margin:0 auto 1.5rem"></div>
      <h3 class="font-serif" style="color: var(--charcoal); margin-bottom:.5rem;">Cargando ofertas...</h3>
      <p style="color: var(--warm-brown);">Un momento por favor</p>
    </div>
    <div id="offers-container" style="display:none;"></div>
    <div id="empty-state" class="empty-state" style="display:none;text-align:center;padding:3rem 1rem;">
      <div class="empty-state-icon" style="width:80px;height:80px;background: rgba(212,165,116,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;">
        <i class="fas fa-percentage" style="color: var(--primary-gold); font-size: 2rem;"></i>
      </div>
      <h3 class="font-serif" style="color: var(--charcoal);">¡Vuelve pronto!</h3>
      <p style="color: var(--warm-brown);">No hay ofertas activas para este local ahora mismo.</p>
      <a href="../" class="btn btn-primary"><i class="fas fa-home mr-2"></i>Volver</a>
    </div>
  </main>

  <footer class="footer" style="text-align:center;padding:2rem 1rem;background: rgba(212,165,116,.1);margin-top:2rem;">
    <div class="footer-logo" style="display:flex;align-items:center;justify-content:center;gap:.8rem;margin-bottom:1rem;">
      <div class="footer-logo-icon" style="width:40px;height:40px;background: var(--gradient-gold);border-radius:50%;display:flex;align-items:center;justify-content:center;">
        <i class="fas fa-wheat-awn" style="color: var(--charcoal);"></i>
      </div>
      <h3 class="font-serif" style="color: var(--charcoal);font-weight:700;">MASSA</h3>
    </div>
    <p style="color: var(--warm-brown);">Cafeterías & Panaderías Artesanales</p>
  </footer>

  <script>
  function getQueryParam(name){ const p=new URLSearchParams(location.search); return p.get(name)||''; }
  const locationSlug = (getQueryParam('local')||'').toLowerCase();
  const LOCATION_NAMES = { 'llevant': 'MASSA Llevant', 'son-oliva':'MASSA Son Oliva' };
  document.getElementById('location-label').textContent = LOCATION_NAMES[locationSlug] ? `Ofertas en ${LOCATION_NAMES[locationSlug]}` : 'Selecciona un local';
  </script>
  <script src="script.js"></script>
</body>
</html>




